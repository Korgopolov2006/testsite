{% extends "admin/base_site.html" %}
{% load i18n %}

{% block title %}{{ title }} | {% trans "Администрирование Django" %}{% endblock %}

{% block extrastyle %}
<style>
    .notifications-container { padding-bottom:40px; }
    .notifications-header { display:flex; flex-wrap:wrap; gap:18px; align-items:center; justify-content:space-between; margin-bottom:32px; }
    .notifications-filters { display:flex; gap:12px; margin-bottom:24px; flex-wrap:wrap; }
    .filter-btn { padding:8px 16px; border:1px solid var(--border-color, #d0d7de); background:var(--input-bg, #fff); border-radius:6px; cursor:pointer; color:var(--text-color, #1a2a6c); }
    .filter-btn.active { background:var(--primary-color, #1a2a6c); color:#fff; border-color:var(--primary-color, #1a2a6c); }
    .notification-item { background:var(--card-bg, #fff); border-radius:12px; padding:16px; margin-bottom:12px; box-shadow:0 4px 12px rgba(0,0,0,0.05); display:flex; gap:16px; align-items:start; color:var(--text-color, #1a2a6c); }
    .notification-item.error { border-left:4px solid #ef4444; }
    .notification-item.warning { border-left:4px solid #f59e0b; }
    .notification-item.info { border-left:4px solid #3b82f6; }
    .notification-icon { font-size:24px; }
    .notification-content { flex:1; }
    .notification-title { font-weight:600; margin-bottom:4px; color:var(--text-color, #1a2a6c); }
    .notification-message { color:var(--text-color, #6c757d); font-size:14px; }
    .notification-time { font-size:12px; color:var(--text-color, #9ca3af); }
    .notification-link { margin-left:auto; }
</style>
{% endblock %}

{% block content %}
<div class="notifications-container">
    <div class="notifications-header">
        <div>
            <h1>{{ title }}</h1>
            <p class="help">{% trans "Все важные события и уведомления в одном месте" %}</p>
        </div>
        <a href="{% url 'admin:index' %}" class="button">← {% trans "Вернуться" %}</a>
    </div>

    <div class="notifications-filters">
        <button class="filter-btn active" data-category="all">{% trans "Все" %}</button>
        <button class="filter-btn" data-category="orders">{% trans "Заказы" %}</button>
        <button class="filter-btn" data-category="backup">{% trans "Бэкапы" %}</button>
        <button class="filter-btn" data-category="users">{% trans "Пользователи" %}</button>
        <button class="filter-btn" data-category="system">{% trans "Система" %}</button>
    </div>

    <div id="notifications-list">
        {% for notification in notifications %}
        <div class="notification-item {{ notification.type }}">
            <div class="notification-icon">
                {% if notification.type == 'error' %}❌{% elif notification.type == 'warning' %}⚠️{% else %}ℹ️{% endif %}
            </div>
            <div class="notification-content">
                <div class="notification-title">{{ notification.title }}</div>
                <div class="notification-message">{{ notification.message }}</div>
                <div class="notification-time">{{ notification.time|date:"d.m.Y H:i" }}</div>
            </div>
            {% if notification.url %}
            <div class="notification-link">
                <a href="{{ notification.url }}" class="button">{% trans "Открыть" %}</a>
            </div>
            {% endif %}
        </div>
        {% empty %}
        <p class="help">{% trans "Нет уведомлений" %}</p>
        {% endfor %}
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const filterButtons = document.querySelectorAll('.filter-btn');
    
    filterButtons.forEach(btn => {
        btn.addEventListener('click', function() {
            filterButtons.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            const category = this.dataset.category;
            // Здесь можно добавить AJAX загрузку уведомлений по категории
        });
    });
});
</script>
{% endblock %}




