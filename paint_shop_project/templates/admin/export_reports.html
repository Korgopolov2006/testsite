{% extends "admin/base_site.html" %}
{% load i18n %}

{% block title %}{{ title }} | {% trans "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ Django" %}{% endblock %}

{% block extrastyle %}
<style>
    .export-container { padding-bottom:40px; }
    .export-header { display:flex; flex-wrap:wrap; gap:18px; align-items:center; justify-content:space-between; margin-bottom:32px; }
    .export-card { background:#fff; border-radius:12px; padding:24px; box-shadow:0 12px 30px rgba(0,0,0,0.05); margin-bottom:24px; }
    .export-card h3 { margin-top:0; }
    .export-form { display:grid; gap:16px; }
    .form-group { display:flex; flex-direction:column; gap:8px; }
    .form-group label { font-weight:600; }
</style>
{% endblock %}

{% block content %}
<div class="export-container">
    <div class="export-header">
        <div>
            <h1>{{ title }}</h1>
            <p class="help">{% trans "–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Excel –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞" %}</p>
        </div>
        <a href="{% url 'admin:index' %}" class="button">‚Üê {% trans "–í–µ—Ä–Ω—É—Ç—å—Å—è" %}</a>
    </div>

    <div class="export-card">
        <h3>{% trans "–û—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º" %}</h3>
        <form method="post" class="export-form">
            {% csrf_token %}
            <input type="hidden" name="report_type" value="sales">
            <div class="form-group">
                <label>{% trans "–ü–µ—Ä–∏–æ–¥ (–¥–Ω–µ–π)" %}</label>
                <input type="number" name="days" value="30" min="1" max="365" required>
            </div>
            <button type="submit" class="button default">{% trans "üìä –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Excel" %}</button>
        </form>
    </div>

    <div class="export-card">
        <h3>{% trans "–û—Ç—á–µ—Ç –ø–æ –∑–∞–∫–∞–∑–∞–º" %}</h3>
        <form method="post" class="export-form">
            {% csrf_token %}
            <input type="hidden" name="report_type" value="orders">
            <div class="form-group">
                <label>{% trans "–ü–µ—Ä–∏–æ–¥ (–¥–Ω–µ–π)" %}</label>
                <input type="number" name="days" value="30" min="1" max="365" required>
            </div>
            <button type="submit" class="button default">{% trans "üìä –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Excel" %}</button>
        </form>
    </div>

    <div class="export-card">
        <h3>{% trans "–û—Ç—á–µ—Ç –ø–æ —Ç–æ–≤–∞—Ä–∞–º" %}</h3>
        <form method="post" class="export-form">
            {% csrf_token %}
            <input type="hidden" name="report_type" value="products">
            <div class="form-group">
                <label>{% trans "–ü–µ—Ä–∏–æ–¥ (–¥–Ω–µ–π)" %}</label>
                <input type="number" name="days" value="30" min="1" max="365" required>
            </div>
            <button type="submit" class="button default">{% trans "üìä –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Excel" %}</button>
        </form>
    </div>

    <div class="export-card">
        <h3>{% trans "–û—Ç—á–µ—Ç –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º" %}</h3>
        <form method="post" class="export-form">
            {% csrf_token %}
            <input type="hidden" name="report_type" value="customers">
            <div class="form-group">
                <label>{% trans "–ü–µ—Ä–∏–æ–¥ (–¥–Ω–µ–π)" %}</label>
                <input type="number" name="days" value="30" min="1" max="365" required>
            </div>
            <button type="submit" class="button default">{% trans "üìä –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Excel" %}</button>
        </form>
    </div>

    <h2 style="margin-top: 40px; margin-bottom: 20px;">{% trans "üì¶ –û—Ç—á–µ—Ç—ã –ø–æ –ø–∞—Ä—Ç–∏—è–º —Ç–æ–≤–∞—Ä–æ–≤" %}</h2>

    <div class="export-card">
        <h3>{% trans "–ü–∞—Ä—Ç–∏–∏, –∏—Å—Ç–µ–∫–∞—é—â–∏–µ –≤ –ø–µ—Ä–∏–æ–¥" %}</h3>
        <form method="post" class="export-form">
            {% csrf_token %}
            <input type="hidden" name="report_type" value="batches_expiring">
            <div class="form-group">
                <label>{% trans "–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞" %}</label>
                <input type="date" name="start_date" value="{{ today|date:'Y-m-d' }}" required>
            </div>
            <div class="form-group">
                <label>{% trans "–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è" %}</label>
                <input type="date" name="end_date" value="{{ next_month|date:'Y-m-d' }}" required>
            </div>
            <button type="submit" class="button default">{% trans "üìä –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Excel" %}</button>
        </form>
    </div>

    <div class="export-card">
        <h3>{% trans "–ò—Å—Ç–æ—Ä–∏—è –¥–≤–∏–∂–µ–Ω–∏–π –ø–æ –ø–∞—Ä—Ç–∏—è–º" %}</h3>
        <form method="post" class="export-form">
            {% csrf_token %}
            <input type="hidden" name="report_type" value="batches_history">
            <div class="form-group">
                <label>{% trans "–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞" %}</label>
                <input type="date" name="start_date" value="{{ last_month|date:'Y-m-d' }}" required>
            </div>
            <div class="form-group">
                <label>{% trans "–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è" %}</label>
                <input type="date" name="end_date" value="{{ today|date:'Y-m-d' }}" required>
            </div>
            <button type="submit" class="button default">{% trans "üìä –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Excel" %}</button>
        </form>
    </div>

    <div class="export-card">
        <h3>{% trans "–ê–Ω–∞–ª–∏–∑ –ø–æ—Ç–µ—Ä—å –æ—Ç –ø—Ä–æ—Å—Ä–æ—á–∫–∏" %}</h3>
        <form method="post" class="export-form">
            {% csrf_token %}
            <input type="hidden" name="report_type" value="batches_losses">
            <div class="form-group">
                <label>{% trans "–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞" %}</label>
                <input type="date" name="start_date" value="{{ last_month|date:'Y-m-d' }}" required>
            </div>
            <div class="form-group">
                <label>{% trans "–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è" %}</label>
                <input type="date" name="end_date" value="{{ today|date:'Y-m-d' }}" required>
            </div>
            <button type="submit" class="button default">{% trans "üìä –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Excel" %}</button>
        </form>
    </div>

    <div class="export-card">
        <h3>{% trans "–û—Å—Ç–∞—Ç–∫–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º" %}</h3>
        <form method="post" class="export-form">
            {% csrf_token %}
            <input type="hidden" name="report_type" value="batches_by_category">
            <button type="submit" class="button default">{% trans "üìä –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Excel" %}</button>
        </form>
    </div>
</div>
{% endblock %}

